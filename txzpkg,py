#inspired by [yours](https://github.com/FarAway6834/txzpkg)

from mytempdir import tempdir, cd, ls, mkdir
from myarcopen import open

def enterdir(dir, back):
    cd(dir)
    yield None
    cd(back)

def tedir(dir, back):
    mkdir(dir)
    with enterdir(dir) as man:
      yield man

def txzip(f):
    with tempdir() as dir:
        files = ls()
        with open(f, 'w') as txz:
            for f in files:
                with open(f) as fp:
                    with enterdir(txz.temp, txz.main) as man0:
                        with tedir(f, txz.temp) as man1:
                            fp.extractall()
                        txz.add(f)
